<div class="container">
  <h1 class="mt-3" style="margin-left: 4em" >Gleich kennen wir deinen perfekten Urlaubsort...</h1>
</div>

<br>

<form #form="ngForm" (ngSubmit)="onSubmit(form)">
  <div class="mb-2 col-lg-6">
    <div class="row">
      <label for="startAirport" class="col-form-label text-md-end text-muted col-md-2 col-lg-4">Startflughafen </label>
      <div class="col-md-10 col-lg-8">
        <input
          type="text"
          id="startAirport"
          name="startAirport"
          placeholder="Flughafen Name"
          class="form-control w-65"
          [(ngModel)]="currentInputFieldValue"
          list="airport-suggestions"
          (input)="onAirportInputChange()"
          (change)="onAirportSelection(currentInputFieldValue)"
          autocomplete="off"
          required
        />
        <datalist id="airport-suggestions">
          <ng-container *ngFor="let airport of matchingAirports">
            <option [value]="airport.airport" [label]="airport.iata"></option>
          </ng-container>
        </datalist>
        <div class="invalid-feedback">Name vom Startflughafen ist notwendig</div>
        <small id="startAirportHelp" class="form-text text-muted">Der gewählte Flughafen ist: {{ travelStartDto.originAirportCode }}</small>
      </div>
    </div>
  </div>


  <div class="mb-2 col-lg-6">
    <div class="row">
      <label for="maxRadius" class="col-form-label text-md-end text-muted col-md-2 col-lg-4">Maximale Entfernung (in km): </label>
      <div class="col-md-10 col-lg-8">
        <input
          type="number"
          id="maxRadius"
          name="maxRadius"
          class="form-control"
          [(ngModel)]="travelStartDto.maxRadius"
          min="0"
          max="100000"
          step="100"
          required
        />
        <div class="invalid-feedback">Radius ist notwendig</div>
      </div>
    </div>
  </div>

  <div class="mb-2 col-lg-6">
    <div class="row">
      <label for="temperatureRange" class="col-form-label text-md-end text-muted col-md-2 col-lg-4">Temperatur Bereich (in °C): </label>
      <div class="col-md-10 col-lg-8">
        <div class="row">
          <div class="col-md-6">
            <input
              type="number"
              id="minTemp"
              name="minTemp"
              class="form-control"
              [(ngModel)]="travelStartDto.minimalTemperature"
              placeholder="Minimale Temperatur"
              min="0"
              max="45"
              step="1"
              required
            />
          </div>
          <div class="col-md-6">
            <input
              type="number"
              id="maxTemp"
              name="maxTemp"
              class="form-control"
              [(ngModel)]="travelStartDto.maximalTemperature"
              placeholder="Maximale Temperatur"
              min="0"
              max="45"
              step="1"
              required
            />
          </div>
        </div>
        <div class="invalid-feedback">Temperatur Angabe ist notwendig</div>
      </div>
    </div>
  </div>

  <div class="mb-2 col-lg-6">
    <div class="row">
      <label for="weatherPreference" class="col-form-label text-md-end text-muted col-md-2 col-lg-4">Wetterpräferenz: </label>
      <div class="col-md-10 col-lg-8">
        <button type="button"
                class="btn btn-secondary btn-lg me-2"
                [class.active]="travelStartDto.targetWeather === 'sunny'"
                (click)="setWeatherPreference('sunny')">
          <i class="bi bi-brightness-high"></i>
        </button>
        <button type="button"
                class="btn btn-secondary btn-lg me-2"
                [class.active]="travelStartDto.targetWeather === 'cloudy'"
                (click)="setWeatherPreference('cloudy')">
          <i class="bi bi-cloud"></i>
        </button>
        <button type="button"
                class="btn btn-secondary btn-lg me-2"
                [class.active]="travelStartDto.targetWeather === 'rainy'"
                (click)="setWeatherPreference('rainy')">
          <i class="bi bi-cloud-rain"></i>
        </button>
        <button type="button"
                class="btn btn-secondary btn-lg"
                [class.active]="travelStartDto.targetWeather === 'snowy'"
                (click)="setWeatherPreference('snowy')">
          <i class="bi bi-snow"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="mb-2 col-lg-6">
    <div class="row justify-content-center">
      <div class="col-md-10 col-lg-8 text-center">
        <button type="submit" class="btn btn-primary btn-lg">Start Your Journey'</button>
      </div>
    </div>
  </div>

</form>

<!-- Loading overlay -->
<div *ngIf="loading" class="loading-overlay">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
